{"data":{"site":{"siteMetadata":{"courseId":"gams-in-r-course"}},"markdownRemark":{"htmlAst":{"type":"root","children":[{"type":"element","tagName":"exercise","properties":{"id":"1","title":"Types of model outcomes","type":"slides"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"slides","properties":{"source":"chapter4_01"},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"exercise","properties":{"id":"2","title":"Classifying purchasing behavior"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let’s fit some GAMs to the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"csale"}]},{"type":"text","value":" data, which has the binary "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"purchase"}]},{"type":"text","value":" outcome variable."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"After you fit the model, answer the following question:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"What does the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"log_mod"}]},{"type":"text","value":" model estimate the probability of a person making a purchase who has mean values of all variables?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Instructions"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Fit a logistic GAM predicting whether a "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"purchase"}]},{"type":"text","value":" will be made based only on a smooth of the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"mortgage_age"}]},{"type":"text","value":" variable."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"codeblock","properties":{"id":"04_02"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Use the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"family = binomial"}]},{"type":"text","value":" argument to fit a logistic model."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"The first value returned from running "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"coef()"}]},{"type":"text","value":" on the model is the intercept"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Use "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"plogis()"}]},{"type":"text","value":" to convert log-odds to probability."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"choice","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"7.5%"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Incorrect. The probability when all variables are at their mean is determined only by the value of the intercept."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"11%"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Incorrect. The probability when all variables are at their mean is determined only by the value of the intercept."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"21%","correct":"true"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Correct! This is the probability when all smooths are at zero and the only effect is the intercept."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"72%"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Incorrect. The probability when all variables are at their mean is determined only by the value of the intercept."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"exercise","properties":{"id":"3","title":"Purchase behavior with multiple smooths"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In this exercise, you will fit a logistic GAM that predicts the outcome ("},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"purchase"}]},{"type":"text","value":") in "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"csale"}]},{"type":"text","value":", using "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"all"}]}]},{"type":"text","value":" other variables as predictors."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"After summarizing the model, answer the following question:  "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Which term in the model is "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"significant"}]},{"type":"text","value":" but approximately "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"linear"}]},{"type":"text","value":"?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Instructions"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Fit a logistic GAM on all variables. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Print the summary of the model."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"codeblock","properties":{"id":"04_03"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Wrap each variable in the data frame "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"csale"}]},{"type":"text","value":" in an "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"s()"}]},{"type":"text","value":" term in the model formula except the outcome variable, "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"purchase"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Use "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"names(csale)"}]},{"type":"text","value":" in the R console to view all the variable names."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Choice"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"choice","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"`s(n_acts)`"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Incorrect. "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"s(n_acts)"}]},{"type":"text","value":" is nonlinear, as it has "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"edf"}]},{"type":"text","value":" much larger than 1."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"`s(avg_prem_balance)`"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Incorrect. "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"s(avg_prem_balance)"}]},{"type":"text","value":" is nonlinear, as it has "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"edf"}]},{"type":"text","value":" much larger than 1."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"`s(retail_crdt_ratio)`"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Incorrect. "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"s(retail_crdt_ratio)"}]},{"type":"text","value":" is nonsignifcant, as it has p > 0.05."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"`s(cred_limit)`","correct":"true"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Correct! This term is linear with "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"edf"}]},{"type":"text","value":" near one, and with p < 0.05.  These same terms apply in the case of logistic GAMs."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"exercise","properties":{"id":"4","title":"Visualizing logistic GAMs","type":"slides"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"slides","properties":{"source":"chapter4_04"},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"exercise","properties":{"id":"5","title":"Visualizing influences on purchase probability"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let’s try plotting and interpreting the purchasing behavior model from the last lesson.  You’ll step through several iterations of plots of "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"log_mod2"}]},{"type":"text","value":", moving from raw plots on the fitting scale towards plots on the response scale with more natural interpretations."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The model ("},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"log_mod2"}]},{"type":"text","value":") from the previous exercise is available in your workspace."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"r"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-r"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-r"]},"children":[{"type":"text","value":"csale "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<-"}]},{"type":"text","value":" readRDS"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"url"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"https://assets.datacamp.com/production/repositories/1786/datasets/cad8c6b369fb6bfbdbae6b17c01df88e1bd336c4/csale.rds\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\nset.seed"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\nlibrary"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"mgcv"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\nlog_mod2 "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<-"}]},{"type":"text","value":" gam"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"purchase "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"~"}]},{"type":"text","value":" s"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"n_acts"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"text","value":" s"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"bal_crdt_ratio"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"text","value":"\n                \t\t   s"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"avg_prem_balance"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"text","value":" s"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"retail_crdt_ratio"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"text","value":"\n                           s"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"avg_fin_balance"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"text","value":" s"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"mortgage_age"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"text","value":" s"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"cred_limit"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n              data "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" csale"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n              family "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" binomial"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n              method "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"REML\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Instructions"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Plot all partial effects of "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"log_mod2"}]},{"type":"text","value":" on the log-odds scale. Put all plots on a single page."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"codeblock","properties":{"id":"04_05"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Use "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"pages = 1"}]},{"type":"text","value":" to put all the partial effects on a single page."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Instructions"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Convert the plots to the probability scale using the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"trans"}]},{"type":"text","value":" argument."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"codeblock","properties":{"id":"04_05_1"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Use the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"plogis"}]},{"type":"text","value":" function in the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"trans"}]},{"type":"text","value":" argument to convert log-odds to probability."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Instructions"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Convert the plots to probability "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"centered on the intercept"}]},{"type":"text","value":" with the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"shift"}]},{"type":"text","value":" argument."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"codeblock","properties":{"id":"04_05_2"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Pass the model intercept, which is the first value in the vector returned by "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"coef(model)"}]},{"type":"text","value":", to the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"shift"}]},{"type":"text","value":" argument."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Instructions"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Add intercept-related uncertainty to the plots using the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"seWithMean"}]},{"type":"text","value":" argument."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"codeblock","properties":{"id":"04_05_3"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Setting "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"seWithMean = TRUE"}]},{"type":"text","value":" incorporates intercept uncertainty into the plots."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"exercise","properties":{"id":"6","title":"Interpreting purchase effect plots (I)"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"For the next few questions, you’ll inspect the partial effects plots of some of the terms in "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"log_mod2"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"All else being equal, which of these variables has the largest effect on purchase probability?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://assets.datacamp.com/production/repositories/1786/datasets/7ae1b168cc3fb462fadc5e554aabc410332d55aa/logmod2plot-1.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@hint"}]},{"type":"text","value":"\nWhich partial effect spans the largest range on the y-axis?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"choice","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"`s(avg_fin_balance)`"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Incorrect. "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"avg_fin_balance"}]},{"type":"text","value":" does not have the largest effect on purchase probability."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"`s(mortage_age)`"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Incorrect. "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"cred_limit"}]},{"type":"text","value":" does not have the largest effect on purchase probability."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"`s(cred_limit)`"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Incorrect. "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"mortgage_age"}]},{"type":"text","value":" does not have the largest effect on purchase probability."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"`s(n_acts)`","correct":"true"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Correct! "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"n_acts"}]},{"type":"text","value":" has the largest effect on purchase probability."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"exercise","properties":{"id":"7","title":"Interpreting purchase effect plots (II)"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"What is the expected purchase probability of a person with 20 accounts ("},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"n_acts = 20"}]},{"type":"text","value":") if all other values are average?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://assets.datacamp.com/production/repositories/1786/datasets/7ae1b168cc3fb462fadc5e554aabc410332d55aa/logmod2plot-1.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@hint"}]},{"type":"text","value":"\nFor the smooth "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"s(n_acts)"}]},{"type":"text","value":", what is the approximate value on the y-axis where the x axis equals 20?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"choice","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"0.15"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Incorrect. What is the probability on the y-axis where "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"n_acts"}]},{"type":"text","value":" is 20?"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"0.25"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Incorrect. What is the probability on the y-axis where "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"n_acts"}]},{"type":"text","value":" is 20?"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"0.35"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Incorrect. What is the probability on the y-axis where "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"n_acts"}]},{"type":"text","value":" is 20?"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"0.55","correct":"true"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Correct! When "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"n_acts"}]},{"type":"text","value":" is 20 the predicted probability of purchase is about 0.55, all else being equal.\n"}]},{"type":"text","value":"\n"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"exercise","properties":{"id":"8","title":"Interpreting purchase effect plots (III)"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Which of these predictions has the greatest uncertainty, assuming all other variables are at average levels?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://assets.datacamp.com/production/repositories/1786/datasets/7ae1b168cc3fb462fadc5e554aabc410332d55aa/logmod2plot-1.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@hint"}]},{"type":"text","value":"\nLook at the confidence intervals around the partial effects at each value."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"choice","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"The probability of purchase when `avg_fin_balance` is 2000."},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Incorrect. Where along this partial effect are the confidence intervals wider?"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"The probability of purchase when `mortgage_age` is 50."},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Incorrect. Look at the confidence intervals around other partial effects."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"The probability of purchase when `avg_fin_balance` is 5000.","correct":"true"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Correct. There are wide confidence intervals around the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"avg_fin_balance"}]},{"type":"text","value":" smooth at a value at 5000."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"The probability of purchase when `mortgage_age` is 150."},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Incorrect. Look at the confidence intervals around other partial effects."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"exercise","properties":{"id":"9","title":"Making predictions","type":"slides"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"slides","properties":{"source":"chapter4_09"},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"exercise","properties":{"id":"10","title":"Predicting purchase behavior and uncertainty(tab)"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"log_mod2"}]},{"type":"text","value":" purchase behavior model lets you make predictions off credit data. In this exercise, you’ll use a new set of data, "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"new_credit_data"}]},{"type":"text","value":", and calculate predicted outcomes and confidence bounds. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The model ("},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"log_mod2"}]},{"type":"text","value":") from the exercise 3 is available in your workspace."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"library(mgcv)\ncsale <- readRDS(url(\"https://assets.datacamp.com/production/repositories/1786/datasets/3331154338220d6597187e3c7bc1e5b7ec064858/csale.rds\"))\nnew_credit_data <- readRDS(url(\"https://assets.datacamp.com/production/repositories/1786/datasets/c76599b99a7f00c8b7f74ca7765b2186216b0dde/new_credit_data.rds\"))\nlog_mod2 <- gam(purchase ~ s(n_acts) + s(bal_crdt_ratio) +\n                \t\t   s(avg_prem_balance) + s(retail_crdt_ratio) +\n                           s(avg_fin_balance)  + s(mortgage_age) + s(cred_limit),\n              data = csale,\n              family = binomial,\n              method = \"REML\")"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Instructions"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Use the model "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"log_mod2"}]},{"type":"text","value":" to calculate the predicted purchase log-odds, and standard errors for those predictions, for the observations in "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"new_credit_data"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"codeblock","properties":{"id":"04_10"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Use the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"predict()"}]},{"type":"text","value":" function."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"The "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"newdata"}]},{"type":"text","value":" argument takes the new dataset."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"The "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"type"}]},{"type":"text","value":" argument gives probabilities if given a value of "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"\"response\""}]},{"type":"text","value":" and log-odds if given a value of "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"\"link\""}]},{"type":"text","value":". "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"The "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"se.fit"}]},{"type":"text","value":"  argument determines whether to return standard errors."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Instructions"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Using your predictions and standard errors, calculate high and low confidence bounds for the log-odds of purchase for each observation. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Calculate the high confidence bound as two standard errors above the mean prediction, and the low confidence bound as two standard errors below the mean prediction."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"codeblock","properties":{"id":"04_10_1"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Confidence bounds should be calculated by adding or subtracting multiples of the standard errors ("},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"multiple*predictions$se.fit"}]},{"type":"text","value":") from the mean predictions ("},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"predictions$fit"}]},{"type":"text","value":")."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Instructions"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Convert your calculated confidence bounds from the log-odds scale to the probability scale."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"codeblock","properties":{"id":"04_10_2"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"plogis()"}]},{"type":"text","value":" function converts values from log-odds to probability."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"exercise","properties":{"id":"11","title":"Explaining individual behaviors"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In the final exercise of this chapter, you will use the model "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"log_mod2"}]},{"type":"text","value":" to predict the contribution of each term to the prediction of one row in "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"new_credit_data"}]},{"type":"text","value":".  "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"After predicting, answer the following question:  "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Which term makes the greatest contribution to the prediction of this first data point?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"r"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-r"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-r"]},"children":[{"type":"text","value":"library"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"mgcv"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\ncsale "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<-"}]},{"type":"text","value":" readRDS"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"url"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"https://assets.datacamp.com/production/repositories/1786/datasets/3331154338220d6597187e3c7bc1e5b7ec064858/csale.rds\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\nnew_credit_data "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<-"}]},{"type":"text","value":" readRDS"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"url"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"https://assets.datacamp.com/production/repositories/1786/datasets/c76599b99a7f00c8b7f74ca7765b2186216b0dde/new_credit_data.rds\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\nlog_mod2 "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<-"}]},{"type":"text","value":" gam"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"purchase "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"~"}]},{"type":"text","value":" s"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"n_acts"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"text","value":" s"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"bal_crdt_ratio"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"text","value":"\n                \t\t   s"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"avg_prem_balance"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"text","value":" s"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"retail_crdt_ratio"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"text","value":"\n                           s"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"avg_fin_balance"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"text","value":" s"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"mortgage_age"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"text","value":" s"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"cred_limit"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n              data "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" csale"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n              family "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" binomial"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n              method "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"REML\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Instructions"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Predict the effect of each model term on the output "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"for the first row"}]},{"type":"text","value":" of "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"new_credit_data"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"codeblock","properties":{"id":"04_11"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Use the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"type = \"terms\""}]},{"type":"text","value":" argument in "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"predict()"}]},{"type":"text","value":" to get the contribution of each term. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Subset the predictions to the first row."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"hint - Which term has the greatest absolute value?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"choice","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"`s(n_acts)`"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Incorrect. "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"s(n_acts)"}]},{"type":"text","value":" lower the predicted probability, but another term raises it even more."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"`s(bal_crdt_ratio)`","correct":"true"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Correct! For this data point, "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"s(bal_crdt_ratio)"}]},{"type":"text","value":" has the greatest contribution to the prediction.  Note this is despite the fact that "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"s(n_acts)"}]},{"type":"text","value":" has a larger "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"overall"}]},{"type":"text","value":" effect, as we saw in the last section."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"`s(avg_prem_balance)`"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Incorrect. Another term has more influence on this prediction than "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"s(avg_premium_balance)"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"opt","properties":{"text":"`s(retail_crdt_ratio)`"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Incorrect. "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"s(retail_crdt_ratio)"}]},{"type":"text","value":" has a very small influence on the predicted outcome."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"exercise","properties":{"id":"12","title":"Doing more with GAMs","type":"slides"},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"slides","properties":{"source":"chapter4_12"},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"frontmatter":{"id":4,"title":"4 - Logistic GAMs for Classification","description":"In the first three chapters, you used GAMs for regression of continuous outcomes.  In this chapter, you will use GAMs for classification. You will build logistic GAMs to predict binary outcomes like customer purchasing behavior, learn to visualize this new type of model, make predictions, and learn how to explain the variables that influence each prediction.","next":"/chapter1","prev":"/chapter3"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/chapter4"}}